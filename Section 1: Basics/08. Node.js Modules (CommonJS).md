### Topic 8: Node.js Modules (CommonJS)

In Node.js, **modules** are fundamental building blocks that help structure your code into manageable, reusable files. Node.js uses the **CommonJS** module system by default. Each file in Node.js is treated as a separate module. The CommonJS system provides features like `require()`, `module.exports`, and file-based scoping to achieve modularity.

When you create a new JavaScript file in Node.js, it automatically becomes a module. Variables, functions, or classes defined in one file are **not accessible** in another file unless explicitly exported and imported. This helps prevent global namespace pollution and makes code safer and easier to maintain.

Let’s start with a simple example. Create two files: `math.js` and `app.js`.

Inside `math.js`, define a couple of functions:

```js
function add(a, b) {
  return a + b;
}

function subtract(a, b) {
  return a - b;
}

module.exports = {
  add,
  subtract
};
```

Here, you’re using `module.exports` to export an object that contains the `add` and `subtract` functions. This makes them accessible to other files.

Now, in `app.js`, you can import and use them like this:

```js
const math = require('./math');

console.log("Addition:", math.add(5, 2));
console.log("Subtraction:", math.subtract(5, 2));
```

Notice the `./` in `require('./math')`. This tells Node.js to load the local file `math.js`. Without `./`, Node would try to find a core or npm module with that name.

Each module in Node.js gets wrapped in a function by the system, which gives it access to variables like `require`, `module`, `exports`, `__dirname`, and `__filename`. This means even if you declare variables at the top of a file, they won’t leak into other modules.

```js
// Inside any module
console.log("This module's filename is:", __filename);
```

You can also export a single function directly:

```js
// In greet.js
module.exports = function(name) {
  return `Hello, ${name}!`;
};

// In app.js
const greet = require('./greet');
console.log(greet("Node.js"));
```

If you want to break up your application into modules (like a `utils`, `routes`, or `controllers` folder), you just structure your files accordingly and export/import as needed.

The CommonJS module system ensures that your code is **organized**, **reusable**, and **isolated**, which is especially helpful in large-scale applications. As your project grows, mastering modules becomes crucial for clean and maintainable code.

In conclusion, Node.js modules using the CommonJS system allow you to export functionality from one file and import it into another using `module.exports` and `require()`. This is the standard module format in Node.js and is the foundation of most Node projects.
